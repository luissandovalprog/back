{% extends 'base.html' %}

{% block title %}{{ object.nombre }} {{ object.apellido }}{% endblock %}

{% block content %}
  <div class="card shadow-sm">
    <div class="card-body">
      <h1 class="card-title">{{ object.nombre }} {{ object.apellido }}</h1>
      
      <h5 class="text-muted">Biografía</h5>
      <p>{{ object.biografia|default:"No hay biografía disponible." }}</p>

      <hr>

      <h5>Libros de este autor:</h5>
      <ul>
        {% for libro in object.libros.all %}
          <li><a href="{% url 'libro_detail' libro.pk %}">{{ libro.titulo }}</a> ({{ libro.ano_publicacion }})</li>
        {% empty %}
          <li>Este autor no tiene libros registrados.</li>
        {% endfor %}
      </ul>

    </div>
    <div class="card-footer bg-white">
      <a href="{% url 'autor_list' %}" class="btn btn-secondary">Volver a la lista</a>
      
      {% if user.rol == 'Bibliotecario' %}
        <a href="{% url 'autor_update' object.pk %}" class="btn btn-warning">Editar</a>
        <a href="{% url 'autor_delete' object.pk %}" class="btn btn-danger">Eliminar</a>
      {% endif %}
    </div>
  </div>
{% endblock %}